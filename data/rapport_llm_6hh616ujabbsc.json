{
  "sql_id": "6hh616ujabbsc",
  "sql_query": "SELECT * FROM test_customers\nWHERE customer_name LIKE '%Customer%'\n   OR email LIKE '%@%'",
  "timestamp": "2026-01-11T00:05:27.080455",
  "sql_full": "SELECT * FROM test_customers\nWHERE customer_name LIKE '%Customer%'\n   OR email LIKE '%@%'",
  "explication_plan": "La planification d'exÃ©cution suivante pour cette requÃªte est similaire Ã  celle-ci:\n\n1. La premiÃ¨re ligne du plan d'exÃ©cution est une instruction SELECT, qui rÃ©cupÃ¨re les donnÃ©es de la table X (MA_TABLE) et les stocke dans un tableau ou une variable.\n\n2. La deuxiÃ¨me ligne du plan d'exÃ©cution est une instruction FROM, qui spÃ©cifie le nom de la table Ã  partir de laquelle l'objet de requÃªte (Oracle Database) se rÃ©fÃ©rera pour obtenir les donnÃ©es. Dans notre cas, l'objet de requÃªte sera MA_TABLE.\n\n3. La troisiÃ¨me ligne du plan d'exÃ©cution est une instruction WHERE, qui contraint la table Ã  retourner des donnÃ©es correspondant Ã  un certain critÃ¨re. Dans cet exemple, nous utilisons le critÃ¨re \"customer_name LIKE '%Customer%'\", qui signifie que les noms de clients doivent Ãªtre inclus dans la requÃªte.\n\n4. La quatriÃ¨me ligne du plan d'exÃ©cution est une instruction JOIN, qui rÃ©cupÃ¨re des donnÃ©es des tables MA_TABLE et MA_TABLINE",
  "points_couteux": "Pour rÃ©ponder Ã  cette question, nous allons analyser le plan d'exÃ©cution Oracle suivant et identifier les trois opÃ©rations les plus coÃ»teuses avec leurs prochains coÃ»ts estimÃ©s, ainsi que leur raison de ces coÃ»ts Ã©levÃ©s. \n\nPlan d'exÃ©cution :\n_______________________| Id | Operation | Nam | CoÃ»t | Lignes\n-------------------------|-----|----------|------|-------|--------\nSELECT STATEMENT         | 0   |                 |      |     5000 |\nTABLE ACCESS FULL        | 1   | MA_TABLE     |      |     5000 |\n_______________________| Id | Operation | Nam | CoÃ»t | Lignes\n\nPourcentage estimÃ© du coÃ»t total :\n1. Nom de l'opÃ©ration (SELECT STATEMENT) - 1000\n2.",
  "recommandations": [
    {
      "type": "REECRITURE",
      "description": "Remplacer SELECT * par colonnes spÃ©cifiques sur TEST_CUSTOMERS",
      "sql": "SELECT col1, col2, col3 FROM TEST_CUSTOMERS WHERE ...",
      "gain": "30-50%"
    },
    {
      "type": "OPTIMISATION",
      "description": "Ã‰viter LIKE avec % au dÃ©but, utiliser recherche plein texte",
      "sql": "-- Option 1: WHERE UPPER(colonne) LIKE UPPER('prefix%')",
      "gain": "50-70%"
    }
  ],
  "metrique_avant_apres": {
    "avant_cout": 4.0,
    "avant_temps": 0.03,
    "avant_rows": 500,
    "apres_cout_estime": 2,
    "reduction_estimee": "32.5%",
    "apres_temps_estime": "0.020s"
  },
  "metrics": {
    "elapsed_sec": 0.03,
    "cpu_sec": 0.026,
    "rows_processed": 500,
    "executions": 1,
    "disk_reads": 0,
    "buffer_gets": 40,
    "optimizer_cost": 4.0
  },
  "problems": [
    "SELECT * - rÃ©cupÃ¨re toutes les colonnes (coÃ»teux en I/O)",
    "LIKE avec wildcard initial '%' - empÃªche l'utilisation d'index"
  ],
  "plan_text": "ğŸ“‹ PLAN D'EXÃ‰CUTION :\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n| ID | OPÃ‰RATION | OBJET | COÃ›T | LIGNES |\n|----|-----------|-------|------|--------|\n| 0  | SELECT STATEMENT     |                 | 1000 |   5000 |\n| 1  | TABLE ACCESS FULL    | MA_TABLE        | 1000 |   5000 |\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•",
  "llm_used": true,
  "analysis_mode": "llm",
  "chatbot_response": "ğŸ” **Analyse de votre requÃªte SQL**\n\n**ProblÃ¨mes identifiÃ©s:**\n1. SELECT * - rÃ©cupÃ¨re toutes les colonnes (coÃ»teux en I/O)\n2. LIKE avec wildcard initial '%' - empÃªche l'utilisation d'index\n\n**Recommandations d'optimisation:**\n1. **REECRITURE** : Remplacer SELECT * par colonnes spÃ©cifiques sur TEST_CUSTOMERS\n   â†’ Gain estimÃ© : 30-50%\n2. **OPTIMISATION** : Ã‰viter LIKE avec % au dÃ©but, utiliser recherche plein texte\n   â†’ Gain estimÃ© : 50-70%\n\n**Impact estimÃ© :** RÃ©duction de 32.5% possible\n\nğŸ’¡ *Ces optimisations sont basÃ©es sur l'analyse du plan d'exÃ©cution.*"
}